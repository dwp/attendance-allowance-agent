{% extends "layouts/internal-layout.html" %}

{% set pageName = "Update claimant address" %}

{% block content %}

  <h1 class="govuk-heading-xl">
    {{ pageName }}
  </h1>

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <table class="govuk-table">
        <caption class="govuk-table__caption govuk-table__caption--m govuk-visually-hidden">Update claimant name</caption>
        <thead class="govuk-table__head">
          <tr class="govuk-table__row">
            <th scope="col" class="govuk-table__header">Details</th>
            <th scope="col" class="govuk-table__header">Claim data</th>
            <th scope="col" class="govuk-table__header">DWP records</th>
            <th scope="col" class="govuk-table__header">Matching status</th>
          </tr>
        </thead>
        <tbody class="govuk-table__body">
          <tr class="govuk-table__row">
            <th scope="row" class="govuk-table__header">Address</th>
            <td class="govuk-table__cell">
              {% if data['claimantAddress'] %}
                {{data['claimantAddress']}}
              {% elif data['claim']['claimFormData']['claimOverview']['address']['address1'] %}
                {{ data['claim']['claimFormData']['claimOverview']['address']['address1'] }}
              {% else %}
                11 street
              {% endif %}
            </td>
            <td class="govuk-table__cell">
              {% if data['dwpData']['address']['address1'] %}
                {{data['dwpData']['address']['address1']}}
              {% else %}
                11 street
              {% endif %}
            </td>
            <td class="govuk-table__cell">
              {% 
                if not 
                  (data['claimantAddress'] == data['dwpData']['address']['address1']) 
                and not 
                  (data['claim']['claimFormData']['claimOverview']['address']['address1'] == data['dwpData']['address']['address1']) 
              %}
                <strong class="govuk-tag govuk-tag--red">
                  Unmatched
                </strong>
              {% 
                elif 
                  (data['claimantAddress'] == data['dwpData']['address']['address1']) 
                or 
                  (data['claim']['claimFormData']['claimOverview']['address']['address1'] == data['dwpData']['address']['address1']) 
              %}
                <strong class="govuk-tag govuk-tag--green">
                  Match
                </strong>
              {% elif data['claimantAddress'] %}
                <strong class="govuk-tag govuk-tag--yellow">
                  Updated
                </strong>
              {% else %}
                <strong class="govuk-tag govuk-tag--red">
                  Error
                </strong>
              {% endif %}
            </td>
          </tr>
        </tbody>
      </table>

      <h2 class="govuk-heading-m">Search address</h2>

      <form method="post" action="search-an-address">
        <div class="govuk-form-group">
          <fieldset class="govuk-fieldset">
            <legend class="govuk-fieldset__legend govuk-fieldset__legend--m">
              Postcode
            </legend>
            <input class="govuk-input govuk-input--width-10" id="claimant-postcode" name="claimantPostcode" type="text">
          </fieldset>
        </div>
        <div style="display: flex; align-items: baseline;">
          <button type="submit" class="govuk-button govuk-!-margin-right-5" data-module="govuk-button">
            Find address
          </button>
          <a href="address-uk" class="govuk-link">Enter an address in manually</a>
        </div>
      </form>
    </div>
  </div>
</div>

{% endblock %}
